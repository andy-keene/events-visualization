<html>
	<head>

		<!-- headers for maps -->
		<script src="https://www.amcharts.com/lib/3/ammap.js"></script>
		<script src="https://www.amcharts.com/lib/3/maps/js/worldLow.js"></script>
		<script src="https://www.amcharts.com/lib/3/plugins/export/export.min.js"></script>
		<link rel="stylesheet" href="https://www.amcharts.com/lib/3/plugins/export/export.css" type="text/css" media="all" />
		<script src="https://www.amcharts.com/lib/3/themes/light.js"></script>

		<!-- jquery -->
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

		<!-- headers for bootstrap -->
		<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" />
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>

		<!-- headers for chart.js -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>

		<!-- local js stuff-->
		<script src="/config.js"></script> 

		<!-- socket -->
		<script src="/socket.io/socket.io.js"></script>


		<style type="text/css">
			#chartdiv {
			  width: 80%;
			  height: 750px;
			  margin: auto;
			  border-radius: 3px;
			  border-style: fill;
			  border-width: 2px;
			  border-color: black;
			}						
		</style>
	</head>
	<body>



	<canvas id="timeLineChart" width="400" height="200"></canvas>
	
	<script src="config.js"></script>
	<script>

	 //populate timeline data
        jQuery.get({
          url: '/events/timeLineData',
          dataType: "json",
          success: function(response, status){
              
              if(!response.error){
                console.log(response);
                for(service in response["timeLines"]){
                    console.log(service)
                    timeLine.data.labels = response["timeLines"][service].labels;
                    timeLine.data.datasets.push({
                        label: service,
                        backgroundColor: config.serviceColors[service],
                        borderColor: config.serviceColors[service],
                        data: response["timeLines"][service].data,
                        labels: response["timeLines"][service].labels,
                        borderWidth: 1,
                        fill: true
                    });
                }
                timeLine.update();
            }
          }
        });


	var ctx = document.getElementById("timeLineChart").getContext('2d');
	var timeLine = new Chart(ctx, {
	    type: 'line',
	    data: {
	        datasets: []
	    },
	    options: {
                responsive: true,
                tooltips: {
                    mode: 'index',
                    intersect: false,
                },
                hover: {
                    mode: 'nearest',
                    intersect: true
                },
                scales: {
                    xAxes: [{
                        display: true,
                        scaleLabel: {
                            display: true,
                            labelString: 'Datetime'
                        }
                    }],
                    yAxes: [{
                        display: true,
                        scaleLabel: {
                            display: true,
                            labelString: 'Events'
                        }
                    }]
                }
        }
	});

</script>


	</body>
</html>




