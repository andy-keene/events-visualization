<html>
	<head>
		<!-- reqs. for bootstrap and datatable in single file -->
        <link rel="stylesheet" type="text/css" href="/css/datatables.min.css"/>
        <script type="text/javascript" src="/js/datatables.min.js"></script>
        <!-- headers for chart.js -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
        <!-- spinner -->
        <script src="/js/spin.js"></script>
        <!-- local js stuff-->
        <script src="/js/config.js"></script>

		<style type="text/css">
			#chartdiv {
			  width: 80%;
			  height: 750px;
			  margin: auto;
			  border-radius: 3px;
			  border-style: fill;
			  border-width: 2px;
			  border-color: black;
			}						
		</style>
	</head>
	<body>



	<canvas id="timeLineChart" width="400" height="200"></canvas>
	
	<script src="config.js"></script>
	<script>

	 //populate timeline data
        jQuery.get({
          url: '/events/timeLineData',
          dataType: "json",
          success: function(response, status){
              
              if(!response.error){
                console.log(response);
                for(service in response["timeLines"]){
                    console.log(service)
                    timeLine.data.labels = response["timeLines"][service].labels;
                    timeLine.data.datasets.push({
                        label: service,
                        backgroundColor: config.serviceColors[service],
                        borderColor: config.serviceColors[service],
                        data: response["timeLines"][service].data,
                        labels: response["timeLines"][service].labels,
                        borderWidth: 1,
                        fill: true
                    });
                }
                timeLine.update();
            }
          }
        });


	var ctx = document.getElementById("timeLineChart").getContext('2d');
	var timeLine = new Chart(ctx, {
	    type: 'line',
	    data: {
	        datasets: []
	    },
	    options: {
                responsive: true,
                tooltips: {
                    mode: 'index',
                    intersect: false,
                },
                hover: {
                    mode: 'nearest',
                    intersect: true
                },
                scales: {
                    xAxes: [{
                        display: true,
                        scaleLabel: {
                            display: true,
                            labelString: 'Datetime'
                        }
                    }],
                    yAxes: [{
                        display: true,
                        scaleLabel: {
                            display: true,
                            labelString: 'Events'
                        }
                    }]
                }
        }
	});

</script>


	</body>
</html>




